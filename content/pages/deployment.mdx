---
title: "Deployment"
description: "Complete guide to deploying Muni documentation to various platforms"
author: "Muni Team"
date: "2024-01-15"
---

# Deployment

Deploy your Muni documentation to any static hosting platform.

## Build for Production

First, build your documentation for production:

```bash
pnpm build
```

This will:

- Generate static HTML files
- Optimize images and assets
- Create a production-ready build in the `.next` directory

## Deployment Platforms

### Vercel (Recommended)

Vercel is the easiest way to deploy Next.js applications:

1. **Connect your repository**

   - Push your code to GitHub
   - Go to [vercel.com](https://vercel.com)
   - Click "New Project"
   - Import your repository

2. **Configure build settings**

   - Framework: Next.js
   - Build Command: `pnpm build`
   - Output Directory: `.next`

3. **Deploy**
   - Vercel will automatically deploy on every push
   - Your site will be available at `https://your-project.vercel.app`

### Netlify

Deploy to Netlify using the Next.js plugin:

1. **Build settings**

   ```toml
   # netlify.toml
   [build]
     command = "pnpm build"
     publish = ".next"

   [[plugins]]
     package = "@netlify/plugin-nextjs"
   ```

2. **Deploy**
   - Connect your repository to Netlify
   - Deploy automatically on every push

### GitHub Pages

Deploy to GitHub Pages using GitHub Actions:

1. **Create workflow file**

   ```yaml
   # .github/workflows/deploy.yml
   name: Deploy to GitHub Pages

   on:
     push:
       branches: [main]

   jobs:
     deploy:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3
         - uses: actions/setup-node@v3
           with:
             node-version: "18"
             cache: "pnpm"
         - run: pnpm install
         - run: pnpm build
         - uses: peaceiris/actions-gh-pages@v3
           with:
             github_token: ${{ secrets.GITHUB_TOKEN }}
             publish_dir: .next
   ```

2. **Enable GitHub Pages**
   - Go to repository Settings > Pages
   - Source: GitHub Actions
   - Your site will be available at `https://username.github.io/repository-name`

### Other Platforms

Muni works with any static hosting platform:

- **AWS S3 + CloudFront**
- **Cloudflare Pages**
- **Firebase Hosting**
- **Surge.sh**
- **Render**

## Environment Variables

Set environment variables for production:

### Vercel

```bash
vercel env add NEXT_PUBLIC_SITE_URL
vercel env add NEXT_PUBLIC_GITHUB_REPO
```

### Netlify

```bash
# In Netlify dashboard
Site Settings > Environment Variables
```

### GitHub Actions

```yaml
env:
  NEXT_PUBLIC_SITE_URL: https://your-site.com
  NEXT_PUBLIC_GITHUB_REPO: https://github.com/your-org/your-repo
```

## Custom Domain

### Vercel

1. Go to Project Settings > Domains
2. Add your custom domain
3. Update DNS records as instructed

### Netlify

1. Go to Site Settings > Domain Management
2. Add custom domain
3. Configure DNS settings

### GitHub Pages

1. Add `CNAME` file to your repository:
   ```
   your-domain.com
   ```
2. Configure DNS to point to GitHub Pages

## Performance Optimization

### Image Optimization

Use Next.js Image component for optimized images:

```jsx
import Image from "next/image";

<Image src="/images/logo.png" alt="Logo" width={200} height={100} priority />;
```

### Static Generation

All pages are statically generated for optimal performance:

```typescript
// pages/your-page.tsx
export async function getStaticProps() {
  return {
    props: {
      // your props
    },
  };
}
```

### Bundle Analysis

Analyze your bundle size:

```bash
pnpm build
pnpm analyze
```

## Monitoring

### Analytics

Add analytics to track usage:

```jsx
// components/Analytics.jsx
import Script from "next/script";

export function Analytics() {
  return (
    <>
      <Script
        src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"
        strategy="afterInteractive"
      />
      <Script id="google-analytics" strategy="afterInteractive">
        {`
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'GA_MEASUREMENT_ID');
        `}
      </Script>
    </>
  );
}
```

### Error Monitoring

Add error monitoring with Sentry:

```bash
pnpm add @sentry/nextjs
```

```javascript
// sentry.client.config.js
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 1.0,
});
```

## Security

### Content Security Policy

Add CSP headers for security:

```javascript
// next.config.js
const nextConfig = {
  async headers() {
    return [
      {
        source: "/(.*)",
        headers: [
          {
            key: "Content-Security-Policy",
            value:
              "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';",
          },
        ],
      },
    ];
  },
};
```

### HTTPS

Ensure your site uses HTTPS:

- Vercel: Automatic HTTPS
- Netlify: Automatic HTTPS
- GitHub Pages: Automatic HTTPS

## Troubleshooting

### Build Errors

Common build errors and solutions:

**Module not found**

```bash
# Clear cache and reinstall
rm -rf node_modules .next
pnpm install
pnpm build
```

**TypeScript errors**

```bash
# Check TypeScript configuration
pnpm tsc --noEmit
```

**Memory issues**

```bash
# Increase Node.js memory limit
NODE_OPTIONS="--max-old-space-size=4096" pnpm build
```

### Deployment Issues

**404 errors**

- Check if all pages are properly exported
- Verify file paths and routing

**Styling issues**

- Ensure Tailwind CSS is properly configured
- Check if all CSS files are included

**Performance issues**

- Use Next.js Image component
- Optimize images and assets
- Enable compression

## Best Practices

1. **Test locally first**: Always test your build locally before deploying
2. **Use environment variables**: Don't hardcode sensitive information
3. **Optimize images**: Use appropriate formats and sizes
4. **Monitor performance**: Set up analytics and error monitoring
5. **Keep dependencies updated**: Regularly update packages for security
6. **Use HTTPS**: Always use HTTPS in production
7. **Set up redirects**: Handle old URLs and broken links
8. **Backup your content**: Keep your content in version control

## Example Deployments

### Vercel

```bash
# Install Vercel CLI
npm i -g vercel

# Deploy
vercel

# Production deployment
vercel --prod
```

### Netlify

```bash
# Install Netlify CLI
npm i -g netlify-cli

# Build and deploy
pnpm build
netlify deploy --dir=.next --prod
```

### Manual Upload

```bash
# Build the project
pnpm build

# Upload .next directory to your hosting provider
# Make sure to configure your server to serve static files
```

## Continuous Deployment

Set up automatic deployments:

### GitHub Actions

```yaml
name: Deploy
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: "18"
          cache: "pnpm"
      - run: pnpm install
      - run: pnpm build
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
```
